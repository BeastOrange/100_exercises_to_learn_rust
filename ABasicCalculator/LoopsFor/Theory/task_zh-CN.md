## 循环，第二部分：`for`

手动增加计数器变量有些繁琐。而且这种模式非常常见！为了更加简便，Rust 提供了一种更简洁的方法来遍历一系列值：`for` 循环。

## `for` 循环

`for` 循环是一种对迭代器[^iterator]中的每个元素执行代码块的方法。

以下是一般语法：

```rust
for <element> in <iterator> {
    // 要执行的代码
}
```

## 范围（Ranges）

Rust 的标准库提供了 **范围** 类型，可用于遍历一系列数字[^weird-ranges]。

例如，如果我们想计算从 1 到 5 的数字总和：

```rust
let mut sum = 0;
for i in 1..=5 {
    sum += i;
}
```

每次循环运行时，`i` 会在执行代码块前被赋予范围中的下一个值。

Rust 中有五种范围类型：

- `1..5`：一个（半开）范围。它包含从 1 到 4 的所有数字，不包括最后一个值 5。
- `1..=5`：一个包含范围。它包含从 1 到 5 的所有数字，包括最后一个值 5。
- `1..`：一个开放范围。它包含从 1 到无穷大的所有数字（实际上直到整数类型的最大值）。
- `..5`：一个从整数类型的最小值开始、到 4 结束的范围。不包括最后一个值 5。
- `..=5`：一个从整数类型的最小值开始、到 5 结束的范围。包括最后一个值 5。

你可以在起点明确指定的情况下，将 `for` 循环用于前三种范围类型。最后两种范围类型用于其他上下文，我们会在后面讲解。

范围的极值不一定必须是整数字面量——它们也可以是变量或表达式！

例如：

```rust
let end = 5;
let mut sum = 0;

for i in 1..(end + 1) {
    sum += i;
}
```

## 延伸阅读

- [`for` 循环文档](https://doc.rust-lang.org/std/keyword.for.html)

[^iterator]: 在课程的后续部分，我们会给出关于什么算作“迭代器”的精确定义。目前可以简单将其理解为一个可以遍历的值序列。
[^weird-ranges]: 你还可以将范围用于其他类型（例如字符和 IP 地址），但整数无疑是日常 Rust 编程中最常见的使用场景。