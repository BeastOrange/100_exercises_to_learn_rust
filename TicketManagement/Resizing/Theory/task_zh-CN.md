## 调整大小

我们提到过，`Vec` 是一种“可增长”的向量类型，但这到底是什么意思呢？如果你尝试向一个已经达到最大容量的 `Vec` 插入一个元素，会发生什么？

```rust
let mut numbers = Vec::with_capacity(3);
numbers.push(1);
numbers.push(2);
numbers.push(3); // 已达到最大容量
numbers.push(4); // 这里会发生什么？
```

`Vec` 会**调整大小**。\
它会向分配器请求一块新的（更大的）堆内存，将现有元素复制过去，并释放旧的内存。

这个操作可能会很耗时，因为它涉及一次新的内存分配以及复制所有现有元素。

## `Vec::with_capacity`

如果你大致知道会在 `Vec` 中存储多少元素，可以使用 `Vec::with_capacity` 方法预先分配足够的内存容量。\
这样可以避免在 `Vec` 增长时进行新的内存分配，但如果你高估了实际使用量，可能会浪费内存。

需要根据具体情况进行评估。