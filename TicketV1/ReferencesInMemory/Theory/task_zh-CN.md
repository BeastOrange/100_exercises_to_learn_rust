## 引用

那么像 `&String` 或 `&mut String` 这样的引用呢？它们在内存中是如何表示的？

在 Rust 中，大多数引用[^fat]在内存中都表示为一个指向内存位置的指针。\
因此，它们的大小与指针的大小相同，即 `usize` 的大小。

你可以使用 `std::mem::size_of` 来验证：

```rust
assert_eq!(std::mem::size_of::<&String>(), 8);
assert_eq!(std::mem::size_of::<&mut String>(), 8);
```

特别是，`&String` 是一个指向存储 `String` 元数据的内存位置的指针。\
如果运行以下代码片段：

```rust
let s = String::from("Hey");
let r = &s;
```

你会在内存中看到类似以下内容：

```
           --------------------------------------
           |                                    |
      +----v----+--------+----------+      +----|----+
Stack | pointer | length | capacity |      | pointer |
      |  |      |   3    |    5     |      |         |
      +--|  ----+--------+----------+      +---------+
         |          s                           r
         |
         v
       +---+---+---+---+---+
Heap   | H | e | y | ? | ? |
       +---+---+---+---+---+
```

可以理解为它是一个指向堆上分配数据的指针的指针。\
`&mut String` 也是如此。

## 并非所有指针都指向堆

上面的例子应该可以说明一个问题：并非所有指针都指向堆。\
它们只是指向某个内存位置，这个位置 _可能_ 位于堆上，但不一定需要位于堆上。

[^fat]: [在课程的后续部分](../../../Traits/String%20slices/Theory/task.md)，我们会讨论 **胖指针**，\
即带有额外元数据的指针。顾名思义，它们比本章讨论的指针更大，也被称为 **瘦指针**。